### 일시적인 리다이렉션
#### 302, 307, 303


- 리소스의 URI 가 일시적으로 변경


- 따라서 검색 엔진 등에서 URL 을 변경하면 안됨
  ( 다음에 어떻게 될지 모르기 때문, 실무에서 많이씀 )


- 아래 3 가지는 기능은 모두다 같다


- **302 Found**
  - **리다이렉트시 요청 메서드가 GET 으로 변하고, 본문이 제거될 수 있음( MAY )**
  - ( 명확하지 않은 리다이렉트 )


- **307 Temporary Redirect**
  - 302 와 기능은 가틈
  - **리다이렉트시 요청 메서드와 본문 유지( 요청 메서드를 변경하면 안된다. MUST NOT )**


- **303 See Other**
  - 302 와 기능은 같음
  - **리다이렉트시 요청 메서드가 GET 으로 변경**
  - ( 명확하게 요청메서드가 반드시 바뀜 )


---

### PRG: Post/Redirect/Get
#### 일시적인 리다이렉션 - 예시


- POST 로 주문후에 웹 브라우저를 새로고침하면?
- 새로고침은 다시 요청( 중복 주문 )
- 중복 주문이 될 수 있다

---

PRG: 사용전

> 요청
>
> ---
>
> **POST** /order HTTP/1.1
>
> Host: localhost:8080
> 
> **itemId=mouse&count=1**

> 응답
>
> ---
>
> HTTP/1.1 **200 OK**
>
> ````html
> <html>주문완료</html>
> ````

_주문 데이터 저장 -->_

**mouse 1개**


- 결과 화면에서 새로고침
> 요청
>
> ---
>
> **POST** /order HTTP/1.1
>
> Host: localhost:8080
> 
> **itemId=mouse&count=1**

> 응답
>
> ---
>
> HTTP/1.1 **200 OK**
>
> ````html
> <html>주문완료</html>
> ````

_주문 데이터 저장 -->_

**mouse 1개**

---

### PRG: Post/Redirect/Get
#### 일시적인 리다이렉션 - 예시


- POST 로 주문 후에 새로 고침으로 인한 중복 주문 방지
- POST 로 주문 후에 주문 결과 화면을 GET 메서드로 리다이렉트
- 새로고침해도 결과 화면을 GET 으로 조회
- 중복 주문 대신에 결과 화면만 GET 으로 다시 요청

---

PRG: Post/Redirect/Get

> 요청
>
> ---
>
> **POST** /order HTTP/1.1
>
> Host: localhost:8080
>
> **itemId=mouse&count=1**

> 응답
>
> ---
>
> HTTP/1.1 **302 Found**
>
> Location: /order-result/19

_주문 데이터 저장 -->_

**mouse 1개**


- 결과 화면에서 새로고침
- GET /order-result/19
- 결과 화면만 다시 요청


> 요청
>
> ---
>
> **GET** /order-result/19 HTTP/1.1
>
> Host: localhost:8080

> 응답
>
> ---
>
> HTTP/1.1 **200 OK**
>
> ````html
> <html>주문완료</html>
> ````

_주문 데이터 조회 -->_

**19 번 주문**

---

### PRG: Post/Redirect/Get
#### 일시적인 리다이렉션 - 예시


- PRG 이후 리다이렉트
  - URL 이 이미 POST -> GET 으로 리다이렉트 됨
  - 새로 고침 해도 GET 으로 결과 화면만 조회
  - ( 일단 이것은 사용성이 매우 좋다 )

---

### 그래서 뭘 써야 하나요?
#### 302, 307,303

- **잠깐정리**
  - 302 Found -> GET 으로 변할 수 있음
  - 307 Temporary Redirect -> 메서드가 변하면 안됨
  - 303 See Other -> 메서드가 GET 으로 변경


- **역사**
  - 처음 302 스펙의 의도는 HTTP 메서드를 유지하는 것
  - 그런데 웹 브라우저들이 대부분 GET 으로 바꾸어버림 ( 일부는 다르게 동작 )
  - 그래서 모호한 302 를 대신하는 명확한 307, 303 이 등장함( 301 대응으로 308 도 등장 )


- **현실**
  - 307,303 을 권장하지만 현실적으로 이미 많은 애플리케이션 라이브러리들이 302를 기본값으로 사용
  - 자동 리다이렉션시에 GET 으로 변해도 되면 그냥 302 를 사용해도 큰 문제 없음

---

### 기타 리다이렉션
#### 300 , 304

- 300 Multiple Choices: 안쓴다
- **304 Not Modified**( 진짜 많이 사용 )
  - 캐시를 목적으로 사용
  - 클라이언트에게 리소스가 수정되지 않았음을 알려준다.
  - ( 그냥 서버에 다시 요청하지말고, 캐시에 있는거 그냥써라!! 라고하는 것 )
  - 따라서 클라이언트는 로컬 PC 에 저장된 캐시를 재사용한다( 캐시로 리다이렉트 한다 )
  - 304 응답은 응답에 메시지 바디를 포함하면 안된다( 로컬 캐시를 사용해야 하므로 )
  - 조건부 GET, HEAD 요청시 사용