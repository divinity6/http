## 무상태 프로토콜
### 스테이스리스( Stateless )

- 서버가 클라이언트의 상태를 보존 X
- 장점 : 서버 확장성이 높음( 스케일 아웃 )
- 단점 : 클라이언트가 추가 데이터 전송

- - -

### Stateful , Stateless 차이
#### 상태 유지 - Stateful

- 고객 : 이 노트북 얼마인가요?
- 점원 : 100만원 입니다


- 고객 : **2개** 구매하겠습니다.
- 점원 : 200 만원 입니다. **신용카드, 현금 중**에 어떤 걸로 구매 하시겠어요?


- 고객 : 신용카드로 구매하겠습니다.
- 점원 : 200 만원 결제 완료되었습니다.

---

#### 상태 유지 - Stateful, 점원이 중간에 바뀌면?

- 고객 : 이 **노트북** 얼마인가요?
- 점원**A** : 100만원 입니다


- 고객 : **2개** 구매하겠습니다.
- 점원**B** : ? 무엇을 2개 구매하시겠어요?

- 고객 : 신용카드로 구매하겠습니다.
- 점원**C** : ? 무슨 제품을 몇개 신용카드로 구매하시겠어요?

--> **Stateful** : 서버가 클라이언트의 이전상태를 보존하는 것이다!, 상태 유지에서는 다른 점원으로 바뀌면 장애가난다

---

#### 상태 유지 - Stateful, 정리

- 고객 : 이 **노트북** 얼마인가요?
- 점원 : 100만원 입니다. **( 노트북 상태 유지 )**


- 고객 : **2개** 구매하겠습니다.
- 점원 : 200 만원 입니다. **신용카드, 현금 중**에 어떤 걸로 구매 하시겠어요? **( 노트북 , 2개 상태 유지 )**


- 고객 : 신용카드로 구매하겠습니다.
- 점원 : 200 만원 결제 완료되었습니다. **( 노트북, 2개, 신용카드 상태 유지 )**

---

### Stateful , Stateless 차이
#### 무상태 - Stateless

- 고객 : 이 **노트북**얼마인가요?
- 점원 : 100만원 입니다.


- 고객 : **노트북 2개** 구매하겠습니다.
- 점원 : 노트북 2개는 200만원 입니다. **신용카드, 현금 중**에 어떤걸로 구매 하시겠어요?


- 고객 : **노트북 2개를 신용카드**로 구매하겠습니다.
- 점원 : 200만원 결제 완료되었습니다

---

#### 무상태 - Stateless, 점원이 중간에 바뀌면?

- 고객 : 이 **노트북** 얼마인가요?
- 점원**A** : 100만원 입니다


- 고객 : **노트북 2개** 구매하겠습니다.
- 점원**B** : 노트북 2개는 200만원 입니다. **신용카드, 현금 중**에 어떤걸로 구매 하시겠어요?

- 고객 : **노트북 2개를 신용카드**로 구매하겠습니다.
- 점원**C** : 200만원 결제 완료되었습니다

--> **Stateless** : 무상태에서는 고객이 필요한 데이터를 그때, 그때 넘기기 때문에 중간에 점원이 바뀌어도 아무 문제가 없다.

--> 이것은 사실, **클라이언트, 서버 아키텍쳐**측면에서는 엄청난 확장성을 가질 수 있다.

---

### Stateful , Stateless 차이
#### 정리

- **상태 유지** : 중간에 다른 점원으로 바뀌면 안된다.
  - ( 중간에 다른 점원으로 바뀔 때 상태 정보를 다른 점원에게 미리 알려줘야 한다 )
  - 클라이언트의 상태관리 어려움
- **무상태** : 중간에 다른 점원으로 바뀌어도 된다.
  - 갑자기 고객이 증가해도 점원을 대거 투입할 수 있다.
  - 갑자기 클라이언트 요청이 증가해도 서버를 대거 투입할 수 있다.
- 무상태는 응답 서버를 쉽게 바꿀 수 있다 -> **무한한 서버 증설 가능**

---

### 상태 유지 - Stateful
#### 항상 같은 서버가 유지되어야 한다.

> 클라이언트A **[ 1.요청 ]** -> 중계 서버 --> 서버1( 상태 유지 , 클라이언트A : 노트북, 2개 ) **[ 2.응답 ]** --> 클라이언트

- 클라이언트에 대한 정보를 서버1에 유지를 해야한다( 왜냐하면 클라이언트A 는 계속 서버1 과 통신해야하기 때문이다. )
  - ( 클라이언트 A 정보를 서버 1 이 알고 있음 ) 
  - 서버를 막 늘리기가 어렵다.
  - 만약, 서버1 이 죽어버리면 클라이언트는 처음부터 다시 진행해야 한다

---

### 무상태 - Stateless
#### 아무 서버나 호출해도 된다

> 클라이언트A **[ 1.요청 ]** ( 노트북 , 2개 포함 ) -> 중계 서버 --> 서버1( 상태를 보관하지 않는다 ) **[ 2.응답 ]** --> 클라이언트

- 서버는 상태를 보관하지 않고, 필요하면 응답만 한다.
  - 이것의 장점은 서버1이 장애가 나더라도, 서버2랑 통신해도 된다
  - 중간에 아무 문맥이 없어도 필요한 정보를 다보내기 때문에 서버가 장애가 나도 상관없다.
  - 이렇게 설계를 하면 필요할때 서버를 수십개 증설이 가능하다.

---

### Stateless
#### 실무 한계

- 모든 것을 무상태로 설계 할 수 있는 경우도 있고 없는 경우도 있다
- 무상태
  - 예) 로그인이 필요 없는 단순한 서비스 소개 화면
- 상태 유지
  - 예) 로그인
- 로그인한 사용자의 경우 로그인 했다는 상태를 서버에 유지해야한다
- 일반적으로 브라우저 쿠키와 서버 세션등을 사용해서 상태 유지
- 상태 유지는 최소한만 사용
  - ( 꼭 필요한 경우에만 어쩔수 없이 사용한다 )
- **Stateless 의 단점** : 데이터를 너무 많이 보낸다.

### 어플리케이션을 설계할때는 최대한 무상태로 설계한다
### 정말 어쩔 수 없는 경우에 한해서만, 상태유지를 한다!

