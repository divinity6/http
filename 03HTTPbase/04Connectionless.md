## 비연결성( connectionless )
### 연결을 유지하는 모델

- 기본적으로 TCP/IP 같은 경우에는 연결을 유지한다

> 클라이언트1 : **[ 1.요청 ]** --> 0. **TCP/IP 연결** <-- **[ 2.응답 ]** 서버
> 
> 클라이언트2 : **[ 1.요청 ]** --> 클라이언트1 연결 유지 <-- **[ 2.응답 ]** 서버
> 
> 클라이언트3 : **[ 1.요청 ]** --> <-- **[ 2.응답 ]** 서버 ( 서버는 연결을 계속 유지, 서버 자원 소모 )

- 이렇게 계속 연결이 유지되고 있으면 서버 자원이 계속 소모가 된다
  - 다른 클라이언트가 놀고 있어도, 서버는 계속 연결을 유지해야 한다는 단점이 있다

---

### 연결을 유지하지 않는 모델

- 요청을 하고, 응답을 받으면 연결을 끊어버린다

> 클라이언트1 : **[ 1.요청 ]** --> 0. **TCP/IP 연결** <-- **[ 2.응답 ]** 서버
>
> 클라이언트2 : **[ 1.요청 ]** --> **3. TCP>IP 연결 종료** <-- **[ 2.응답 ]** 서버
>
> 클라이언트3 : **[ 1.요청 ]** --> **3. TCP>IP 연결 종료** <-- **[ 2.응답 ]** 서버 ( 서버는 연결 유지 X , 최소한의 자원 유지 )

- 자원을 요청을 주고받을때만 연결하고, 서버가 유지하는 자원을 최소한으로 줄인다
  - 클라이언트가 수만대일 경우, 서버가 동시에 유지해야하는 자원을 요청할때만 받고 끊어버리면 된다.

---

### 비 연결성

- HTTP 는 기본이 연결을 유지하지 않는 모델
- 일반적으로 초 단위의 이하의 빠른 속도로 응답
- 1시간 동안 수천명이 서비스를 사용해도 실제 서버에서 동시에 처리하는 요청은 수십개 이하로 매우 작음
  - 예) 웹 브라우저에서 계속 연속해서 검색 버튼을 누르지는 않는다
- 서버 자원을 매우 효율적으로 사용할 수 있음

---

### 비 연결성
#### 한계와 극복

- TCP/IP 연결을 새로 맺어야 한다 - 3 way handshake 시간 추가
- 웹 브라우저로 사이트를 요청하면 HTML 뿐만 아니라 자바스크립트, css, 추가 이미지등등
  수 많은 자원이 함께 다운로드
- 지금은 HTTP 지속 연결( Persistent Connections )로 문제 해결
  - 너무 자원소모가 크기때문에 기본적으로 지속연결을 사용한다
  - 예) 이전에는,
    - TCP/IP 연결 , 
    - HTML 요청하고, 응답받고 
    - 종료,
    - 
    - 다시 TCP/IP 연결,
    - JS 요청,응답받고
    - 종료
    - 
    - 다시 TCP/IP 연결
    - 이미지 요청,응답받고
    - 종료
  - HTTP 지속연결
    - TCP/IP 연결 ( 연결 유지 )
    - HTML 요청/응답
    - JS 요청/응답
    - 이미지 요청/응답
    - 종료
- HTTP/2 , HTTP/3 에서 더 많이 최적화
  - 2,3 에서는 훨씬더 최적화했다
  - 심지어 3에서는 UDP 프로토콜을 사용해, 연결속도도 줄였다

---

### 스테이스리스를 기억하자
#### 서버 개발자들이 어려워하는 업무

- 정말 같은 시간에 딱 맞추어 발생하는 대용량 트래픽
- 예) 선착순 이벤트, 명절 KTX 예약, 학과 수업 등록
- 예) 저녁 6:00 선착순 1000명 치킨 할인 이벤트 -> 수만명 동시 요청

이런것들을 최대한 stateless 하게 설계하는 것이 중요하다( 어떻게든... )
- 예) 첫 페이지는 로그인도 필요없는 정적 페이지
- 그 후 이벤트 참여버튼 누르게하기 등


무상태로 갈 수 있는것은 최대한 무상태로 가고, 어쩔 수 없는 부분에 한해서만 상태유지를 하도록 분리해서 설계하는 것이 중요하다